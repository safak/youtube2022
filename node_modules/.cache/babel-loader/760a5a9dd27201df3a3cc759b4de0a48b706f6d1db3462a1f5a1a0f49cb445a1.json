{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.multipartRequestDataProcessor = void 0;\nconst utils_js_1 = require(\"./utils.js\");\n// Method for formatting HTTP body for the multipart/form-data specification\n// Mostly taken from Fermata.js\n// https://github.com/natevw/fermata/blob/5d9732a33d776ce925013a265935facd1626cc88/fermata.js#L315-L343\nconst multipartDataGenerator = (method, data, headers) => {\n  const segno = (Math.round(Math.random() * 1e16) + Math.round(Math.random() * 1e16)).toString();\n  headers['Content-Type'] = `multipart/form-data; boundary=${segno}`;\n  const textEncoder = new TextEncoder();\n  let buffer = new Uint8Array(0);\n  const endBuffer = textEncoder.encode('\\r\\n');\n  function push(l) {\n    const prevBuffer = buffer;\n    const newBuffer = l instanceof Uint8Array ? l : new Uint8Array(textEncoder.encode(l));\n    buffer = new Uint8Array(prevBuffer.length + newBuffer.length + 2);\n    buffer.set(prevBuffer);\n    buffer.set(newBuffer, prevBuffer.length);\n    buffer.set(endBuffer, buffer.length - 2);\n  }\n  function q(s) {\n    return `\"${s.replace(/\"|\"/g, '%22').replace(/\\r\\n|\\r|\\n/g, ' ')}\"`;\n  }\n  const flattenedData = (0, utils_js_1.flattenAndStringify)(data);\n  for (const k in flattenedData) {\n    const v = flattenedData[k];\n    push(`--${segno}`);\n    if (Object.prototype.hasOwnProperty.call(v, 'data')) {\n      const typedEntry = v;\n      push(`Content-Disposition: form-data; name=${q(k)}; filename=${q(typedEntry.name || 'blob')}`);\n      push(`Content-Type: ${typedEntry.type || 'application/octet-stream'}`);\n      push('');\n      push(typedEntry.data);\n    } else {\n      push(`Content-Disposition: form-data; name=${q(k)}`);\n      push('');\n      push(v);\n    }\n  }\n  push(`--${segno}--`);\n  return buffer;\n};\nfunction multipartRequestDataProcessor(method, data, headers, callback) {\n  data = data || {};\n  if (method !== 'POST') {\n    return callback(null, (0, utils_js_1.stringifyRequestData)(data));\n  }\n  this._stripe._platformFunctions.tryBufferData(data).then(bufferedData => {\n    const buffer = multipartDataGenerator(method, bufferedData, headers);\n    return callback(null, buffer);\n  }).catch(err => callback(err, null));\n}\nexports.multipartRequestDataProcessor = multipartRequestDataProcessor;","map":{"version":3,"names":["Object","defineProperty","exports","value","multipartRequestDataProcessor","utils_js_1","require","multipartDataGenerator","method","data","headers","segno","Math","round","random","toString","textEncoder","TextEncoder","buffer","Uint8Array","endBuffer","encode","push","l","prevBuffer","newBuffer","length","set","q","s","replace","flattenedData","flattenAndStringify","k","v","prototype","hasOwnProperty","call","typedEntry","name","type","callback","stringifyRequestData","_stripe","_platformFunctions","tryBufferData","then","bufferedData","catch","err"],"sources":["C:/Users/Marcia/OneDrive/Escritorio/Web-dev/Working/Ecommerce-2023/client/node_modules/stripe/cjs/multipart.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multipartRequestDataProcessor = void 0;\nconst utils_js_1 = require(\"./utils.js\");\n// Method for formatting HTTP body for the multipart/form-data specification\n// Mostly taken from Fermata.js\n// https://github.com/natevw/fermata/blob/5d9732a33d776ce925013a265935facd1626cc88/fermata.js#L315-L343\nconst multipartDataGenerator = (method, data, headers) => {\n    const segno = (Math.round(Math.random() * 1e16) + Math.round(Math.random() * 1e16)).toString();\n    headers['Content-Type'] = `multipart/form-data; boundary=${segno}`;\n    const textEncoder = new TextEncoder();\n    let buffer = new Uint8Array(0);\n    const endBuffer = textEncoder.encode('\\r\\n');\n    function push(l) {\n        const prevBuffer = buffer;\n        const newBuffer = l instanceof Uint8Array ? l : new Uint8Array(textEncoder.encode(l));\n        buffer = new Uint8Array(prevBuffer.length + newBuffer.length + 2);\n        buffer.set(prevBuffer);\n        buffer.set(newBuffer, prevBuffer.length);\n        buffer.set(endBuffer, buffer.length - 2);\n    }\n    function q(s) {\n        return `\"${s.replace(/\"|\"/g, '%22').replace(/\\r\\n|\\r|\\n/g, ' ')}\"`;\n    }\n    const flattenedData = (0, utils_js_1.flattenAndStringify)(data);\n    for (const k in flattenedData) {\n        const v = flattenedData[k];\n        push(`--${segno}`);\n        if (Object.prototype.hasOwnProperty.call(v, 'data')) {\n            const typedEntry = v;\n            push(`Content-Disposition: form-data; name=${q(k)}; filename=${q(typedEntry.name || 'blob')}`);\n            push(`Content-Type: ${typedEntry.type || 'application/octet-stream'}`);\n            push('');\n            push(typedEntry.data);\n        }\n        else {\n            push(`Content-Disposition: form-data; name=${q(k)}`);\n            push('');\n            push(v);\n        }\n    }\n    push(`--${segno}--`);\n    return buffer;\n};\nfunction multipartRequestDataProcessor(method, data, headers, callback) {\n    data = data || {};\n    if (method !== 'POST') {\n        return callback(null, (0, utils_js_1.stringifyRequestData)(data));\n    }\n    this._stripe._platformFunctions\n        .tryBufferData(data)\n        .then((bufferedData) => {\n        const buffer = multipartDataGenerator(method, bufferedData, headers);\n        return callback(null, buffer);\n    })\n        .catch((err) => callback(err, null));\n}\nexports.multipartRequestDataProcessor = multipartRequestDataProcessor;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}